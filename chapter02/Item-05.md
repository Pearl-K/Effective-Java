# Item 05. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라
- 많은 클래스가 자원에 의존한다.
- 이 때 자원을 직접 명시하지 말고(직접 클래스 내부에 생성하지 말고), 의존 객체 주입을 사용하는 것이 좋다.


## 의존 객체 주입의 장점
- 원하는 자원을 DI를 통해 주입해줄 수 있다. (유연성, 재사용성)
- 의존 객체를 주입할 때, 테스트 용 Mock 객체를 주입하기 편해진다. (테스트 용이성)

## Factory
- Factory란 호출할 때마다 특정 타입의 인스턴스를 반복해서 만들어 주는 객체를 말한다.
- Factory Method 패턴은 의존 객체 주입 패턴을 응용해서 구현한 것이다.


## 비교: 생성자에 자원 팩토리를 넘겨주는 것 vs Spring DI
- 자원 팩토리는 필요한 자원(객체)를 새롭게 생성해서 주입한다.
    - 외부에서 자원을 주입받는 것은(DI 패턴)이 맞고, 그 중에서도 새로운 객체를 계속 생성해서 제공하는 경우, 유연성을 위해 Factory Pattern 사용을 추천한다.
- Spring 컨테이너의 DI는 빈 등록된 객체를 알아서 관리하고 주입해준다.
- 따라서, 정적인 Bean 주입만으로 해결되는 문제는 Spring DI로 충분하고, 그 외에 매번 새로운 객체가 생성되어야 하거나 동적으로 자원을 선택해야 하는 경우에 팩토리를 사용하는 것이 좋다.


## `Supplier<T>` 를 활용한 팩토리 메서드 구현
- `Supplier<T>` 는 팩토리 메서드의 함수형 표현이다. (함수형 인터페이스)
- 팩토리 메서드 패턴의 람다 기반 구현체라고 할 수 있다.
- 객체를 공급하는 함수형 인터페이스로, `T get()` 을 호출해 객체를 반환한다.


### Supplier<T> 를 사용한 Java API
1) `Optional.orElseGet(Supplier<? extends T>)`


    ```java
    // Optional 결과가 비어있을 때, 새로운 유저 생성
    // 지연 생성의 대표적인 사례
    Optional<User> maybeUser = userRepo.findById(id);
    User user = maybeUser.orElseGet(() -> new User("default"));
    ```

- 이렇게 Supplier<T>는 Java Core API, Stream 등 다양한 곳에서 객체를 공급할 필요가 있을 때 사용한다.