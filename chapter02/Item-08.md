# Item 08. finalizer 와 cleaner 사용을 피하라
- Java에는 두 가지 객체 소멸자 finalizer & cleaner 가 있다.
- 그러나 이 소멸자는 사용을 피해야하는 여러 이유가 있다.


## finalizer & cleaner 사용하지 말아야 하는 이유
### 1. finalizer & cleaner 는 즉시 수행된다는 보장이 없다. (수행 시점 보장 불가)
- 제때 실행되어야 하는 작업을 절대 할 수 없다.
- 이 둘이 얼마나 신속히 수행될지는 전적으로 가비지 컬렉터 알고리즘에 따라 다르다. (GC마다 천차만별)
- 특히, 클래스에 finalizer를 달면, 그 인스턴스의 자원 회수가 제멋대로 지연될 수 있다.
  - ex. finalizer 스레드가 다른 애플리케이션 스레드보다 우선 순위가 낮아서 계속 기다리는 기아 현상
- 이에 비해 cleaner는 자신을 수행할 스레드를 제어할 수 있다.
  - 그러나 백그라운드에서 수행한다는 점, GC 통제 하에 있다는 점이 여전히 즉각 수행된다는 보장이 없다.


### 2. finalizer & cleaner 의 수행 여부도 보장할 수 없다.



### 3. finalizer & cleaner 의 심각한 성능 문제


### 4. finalizer 공격에 노출될 수 있다.


## Native Peer


## 단점에도 불구하고 사용해야하는 경우가 있다면?
- GC가 회수하지 못하는 네이티브 자원의 회수용으로 사용한다. 
- 이는 자바 객체가 아니기 때문에, GC 관리 대상이 아니기 때문이다.
- finalizer를 호출하면 이 자원을 회수 할 수 있다.


## Summary
- cleaner(Java 8까지는 finalizer)는 안전망 역할이나 중요하지 않은 네이티브 자원 회수용으로만 사용하자.
- 물론, 위에서 언급한 불확실성과 성능 저하에 주의해야한다.